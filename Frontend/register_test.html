<!DOCTYPE html>
<html>
<head>
  <title>Test Registration</title>
</head>
<body>

<h2>Event Registration Test Page</h2>

<form id="regForm">
  <input type="hidden" name="event_id" value="1">

  <label>Name: <input name="name" required></label><br><br>
  <label>Email: <input name="email" type="email" required></label><br><br>
  <label>Department: <input name="department" required></label><br><br>
  <label>Roll: <input name="roll" required></label><br><br>
  <label>Phone: <input name="phone" required></label><br><br>

  <label>Food:
    <select name="food">
      <option value="No preference">No preference</option>
      <option value="Vegetarian">Vegetarian</option>
      <option value="Vegan">Vegan</option>
      <option value="Halal">Halal</option>
      <option value="Other">Other</option>
    </select>
  </label><br><br>

  <button type="submit">Submit</button>
</form>

<script>
document.getElementById("regForm").addEventListener("submit", async function(e){
  e.preventDefault();
  let formData = new FormData(this);

  console.log("Sending request...");

  try {
      let res = await fetch("http://localhost/Event_HUB-main/Backend/add_attendee.php", {
        method: "POST",
        body: formData
      });

      let text = await res.text();
      console.log("RAW RESPONSE:", text);

      let data = JSON.parse(text);
      alert(JSON.stringify(data, null, 2));
  }
  catch(err){
      console.error("FETCH ERROR:", err);
      alert("Fetch error: " + err);
  }
});
</script>


</body>
</html>
