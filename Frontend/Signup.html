<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Animated Sign Up Page + Google Sign-In</title>
  <style>
    :root{
      --bg1:#0f172a; --bg2:#0b1220; --accent:#7c3aed; --accent-2:#06b6d4; --card:#0b1020;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;color:#e6eef8}

    body{
      display:flex;align-items:center;justify-content:center;min-height:100vh;
      background:linear-gradient(120deg,var(--bg1),var(--bg2));overflow:hidden
    }

    .blob{position:absolute;border-radius:50%;filter:blur(40px);opacity:0.28;animation:float 10s ease-in-out infinite}
    .blob.a{width:520px;height:520px;background:linear-gradient(45deg,var(--accent),var(--accent-2));top:-12%;left:-6%}
    .blob.b{width:380px;height:380px;background:linear-gradient(135deg,#2dd4bf,#60a5fa);bottom:-10%;right:-6%}
    .blob.c{width:240px;height:240px;background:linear-gradient(90deg,#ff8a65,#ffb86b);top:8%;right:8%}
    @keyframes float{0%{transform:translateY(0)}50%{transform:translateY(-28px)}100%{transform:translateY(0)}}

    .card{position:relative;z-index:2;width:520px;padding:40px;border-radius:16px;background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.02));backdrop-filter:blur(6px);box-shadow:0 14px 40px rgba(2,6,23,0.6);transform-origin:center;transition:transform 300ms cubic-bezier(.2,.8,.2,1)}
    .card:hover{transform:translateY(-8px) scale(1.01)}

    .brand{display:flex;gap:14px;align-items:center;margin-bottom:18px}
    .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;font-weight:800}
    .title{font-size:22px;font-weight:700}
    .subtitle{font-size:13px;color:rgba(230,238,248,0.74)}

    form{display:flex;flex-direction:column;gap:14px;margin-top:6px}
    .field{position:relative}
    label{position:absolute;left:14px;top:12px;font-size:13px;color:rgba(230,238,248,0.6);pointer-events:none;transition:all 160ms}
    input{width:100%;padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;font-size:16px;outline:none}
    input:focus{box-shadow:0 8px 26px rgba(7,9,25,0.6);border-color:rgba(124,58,237,0.5)}
    input:not(:placeholder-shown)+label,input:focus+label{transform:translateY(-10px) scale(0.92);color:var(--accent);top:8px}

    .btn{margin-top:6px;padding:16px;border-radius:12px;border:0;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#06121f;font-weight:700;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;gap:10px}
    .btn:active{transform:scale(0.995)}

    .small{font-size:13px;color:rgba(230,238,248,0.76)}
    .foot{margin-top:12px;text-align:center;color:rgba(230,238,248,0.55);font-size:13px}

    .success{display:flex;flex-direction:column;align-items:center;gap:12px;padding:20px;border-radius:14px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));text-align:center}
    .check{width:96px;height:96px;border-radius:50%;display:grid;place-items:center;background:linear-gradient(90deg,#34d399,#10b981);box-shadow:0 10px 38px rgba(16,185,129,0.18)}
    .check svg{width:56px;height:56px;stroke:#052018;stroke-width:6;fill:none;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:100;stroke-dashoffset:100;animation:draw 700ms ease forwards}
    @keyframes draw{to{stroke-dashoffset:0}}

    @media (max-width:560px){.card{width:92vw;padding:22px}.logo{width:48px;height:48px}}
  </style>
  <!-- Google Identity Services (async) -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
  <div class="blob a" aria-hidden></div>
  <div class="blob b" aria-hidden></div>
  <div class="blob c" aria-hidden></div>

  <div class="card" id="card">
    <div class="brand">
      <div class="logo">AI</div>
      <div>
        <div class="title">Create your account</div>
        <div class="subtitle">Sign up to access your dashboard — it only takes a minute</div>
      </div>
    </div>

    <form id="signupForm" autocomplete="off">
      <div class="field">
        <input id="name" name="name" placeholder=" " type="text" required />
        <label for="name">Full name</label>
      </div>

      <div class="field">
        <input id="email" name="email" placeholder=" " type="email" required />
        <label for="email">Email</label>
      </div>

      <div class="field">
        <input id="password" name="password" placeholder=" " type="password" required minlength="6" />
        <label for="password">Create password</label>
      </div>

      <div class="field">
        <input id="confirm" name="confirm" placeholder=" " type="password" required minlength="6" />
        <label for="confirm">Confirm password</label>
      </div>

      <button type="submit" class="btn" id="signupBtn">
        <span class="btn-text">Create account</span>
        <span class="dots" style="display:none;align-items:center;gap:6px;margin-left:6px">
          <span style="width:8px;height:8px;border-radius:50%;background:rgba(2,6,23,0.7);opacity:0;animation:dot 1s infinite .0s"></span>
          <span style="width:8px;height:8px;border-radius:50%;background:rgba(2,6,23,0.7);opacity:0;animation:dot 1s infinite .12s"></span>
          <span style="width:8px;height:8px;border-radius:50%;background:rgba(2,6,23,0.7);opacity:0;animation:dot 1s infinite .24s"></span>
        </span>
      </button>

      <div style="display:flex;align-items:center;gap:10px;margin-top:12px">
        <hr style="flex:1;border:none;border-top:1px solid rgba(255,255,255,0.05)">
        <div style="font-size:13px;color:rgba(230,238,248,0.6)">or</div>
        <hr style="flex:1;border:none;border-top:1px solid rgba(255,255,255,0.05)">
      </div>

      <div id="gSignUp" style="margin-top:12px;display:flex;justify-content:center"></div>

      <div style="display:flex;justify-content:center;margin-top:12px">
        <button id="customGSignUp" type="button" class="btn" style="background:transparent;border:1px solid rgba(255,255,255,0.06);color:inherit;">
          <img src="https://developers.google.com/identity/images/g-logo.png" alt="g" style="width:18px;margin-right:8px"> Sign up with Google
        </button>
      </div>

    </form>

    <div class="foot">Already have an account? <a href="#" id="toSignIn" style="color:inherit;text-decoration:underline">Sign in</a></div>
  </div>

  <template id="successTpl">
    <div class="success">
      <div class="check">
        <svg viewBox="0 0 52 52" xmlns="http://www.w3.org/2000/svg">
          <path d="M14 27 L22 34 L38 16" />
        </svg>
      </div>
      <div style="font-weight:700;font-size:18px">Account created</div>
      <div class="small">Welcome — we'll take you to your dashboard in a moment</div>
    </div>
  </template>

  <script>
    // subtle card tilt
    const card = document.getElementById('card');
    window.addEventListener('mousemove', (e)=>{
      const rect = card.getBoundingClientRect();
      const cx = rect.left + rect.width/2;
      const cy = rect.top + rect.height/2;
      const dx = (e.clientX - cx)/20; const dy = (e.clientY - cy)/30;
      card.style.transform = `perspective(900px) rotateX(${ -dy }deg) rotateY(${ dx }deg)`;
    });
    window.addEventListener('mouseleave', ()=>{card.style.transform='none'});

    const form = document.getElementById('signupForm');
    const btn = document.getElementById('signupBtn');
    const dots = btn.querySelector('.dots');
    const btnText = btn.querySelector('.btn-text');

    form.addEventListener('submit', (ev)=>{
      ev.preventDefault();

      const name = document.getElementById('name');
      const email = document.getElementById('email');
      const pw = document.getElementById('password');
      const conf = document.getElementById('confirm');

      if(!name.value){shake(name);name.focus();return}
      if(!email.checkValidity()){shake(email);email.focus();return}
      if(pw.value.length < 6){shake(pw);pw.focus();return}
      if(pw.value !== conf.value){shake(conf);conf.focus();return}

      // show loading state
      btn.disabled = true; 
      btnText.style.display='none'; 
      dots.style.display='inline-flex';

      // SEND DATA TO signup.php
      const formData = new FormData();
      formData.append("name", name.value);
      formData.append("email", email.value);
      formData.append("password", pw.value);

      fetch("../Backend/signup.php", {
          method: "POST",
          body: formData
      })
      .then(res => res.json())
      .then(data => {

          if (data.status === "success") {

              // success animation (same as your original)
              const tpl = document.getElementById('successTpl');
              const node = tpl.content.cloneNode(true);
              const parent = form.parentElement;
              parent.replaceChild(node, form);

              document.querySelectorAll('.blob').forEach((b,i)=>{
                  b.style.transition='transform 700ms, opacity 700ms';
                  b.style.transform='scale(1.18)';
                  b.style.opacity = i===0 ? '0.36' : '0.18';
              });

              setTimeout(()=>{
                card.style.transition='transform 500ms ease, opacity 500ms';
                card.style.transform='scale(0.98) translateY(-8px)';
                card.style.opacity='0.98';
              }, 900);

          } else {
              alert(data.message);
              btn.disabled = false; 
              btnText.style.display='inline'; 
              dots.style.display='none';
          }
      })
      .catch(err => {
          alert("Server error! Check signup.php path.");
          btn.disabled = false;
          btnText.style.display='inline';
          dots.style.display='none';
      });

    });

    function shake(el){
      el.style.transition='transform 120ms';
      el.style.transform='translateX(-8px)';
      setTimeout(()=>{el.style.transform='translateX(8px)'},120);
      setTimeout(()=>{el.style.transform='translateX(0)';el.style.transition=''},260);
    }

    // Google Identity integration (demo)
    function handleCredentialResponse(response){
      const payload = JSON.parse(atob(response.credential.split('.')[1]));
      const tpl = document.getElementById('successTpl');
      const node = tpl.content.cloneNode(true);
      node.querySelector('.small').textContent = `Hi ${payload.name || payload.email} — creating your account...`;
      const parent = form.parentElement; 
      parent.replaceChild(node, form);
    }

    window.onload = function(){
      const CLIENT_ID = 'YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com';
      if(window.google && google.accounts && google.accounts.id){
        google.accounts.id.initialize({client_id: CLIENT_ID, callback: handleCredentialResponse, ux_mode:'popup'});
        google.accounts.id.renderButton(document.getElementById('gSignUp'),
          { theme: 'outline', size: 'large', width: 340 });
        document.getElementById('customGSignUp').addEventListener('click', ()=>{google.accounts.id.prompt()});
      }

      document.getElementById('toSignIn').addEventListener('click', (e)=>{
        e.preventDefault();
        window.location.href = 'login.html';
      });
    }
</script>
</body>
</html>
